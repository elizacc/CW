Пусть $x = (x_1, \ldots, x_d)$ -- вектор признаков объекта. У нас есть модель $f(x): \re^d \rightarrow \re$. Мы хотим понять, как признаки $x_1$ и $x_2$ влияют на предсказание модели. Обозначим $x_r = (x_3, \ldots, x_d)$ за вектор остальных признаков.

Нам нужно получить функцию зависимости предсказания от одного-двух признаков при зафиксированных остальных: $g(x_1, x_2) = f(x_1, x_2 | \, x_r)$. % не знаю насколько корректно
Но если $x_1$ и/или $x_2$ зависимы с признаками из $x_r$, то возникает проблема. При изменении анализируемого признака меняется и зависимый с ним, который мы не рассматриваем -- мы не сможем рассмотреть чистый предельный эффект одного признака, на него всегда будет наложен эффект другого предиктора. Поэтому одной из предпосылок метода является независимость исследуемых признаков от остальных.

Но даже с предпосылкой о независимости признаков функция $g(x_1, x_2)$ не будет показывать точный результат, так как предельные эффекты предикторов разные для разных объектов выборки. Поэтому мы рассмотрим, как влияют анализируемые признаки на среднее предсказание. То есть найдем матожидание предсказания модели при фиксированных исследуемых признаках (как констант с точки зрения матожидания):

\[
\bar{g}(x_1, x_2) = \e(f(x_1, x_2, x_r) \, | x_r)
\]

Таким образом, мы получим функцию, которая показывает предельные эффекты признаков для среднего предсказания. Но чтобы найти матожидание, мы должны знать истинные распределения признаков. Поскольку нам недоступна данная информация, можно воспользоваться методом Монте-Карло, чтобы примерно оценить искомую функцию:

\[
\hat{g}(x_1, x_2) = \frac{1}{n} \isum f(x_1, x_2, X_r^{(i)}),
\]
где $X_r^{(i)}$ -- $i$ строка матрицы $X_r$, содержащей признаки $x_r$ для всех объектов выборки.
% не уверена что все красиво и понятно

Результат: функция показывает, как исследуемые признаки в среднем влияют на результат работы модели. Мы можем построить ее график, чтобы более наглядно посмотреть на влияние предикторов на предсказание.% не уверена что в среднем -- корректная формулировка

% добавить преимущества и недостатки


% почему бы просто эту функцию не находить
% способ дает меньшую точность там, где зависимость можно было достать из модели
% можно делать анимацию, если нельзя рассмотреть все сразу :)
% Должна быть предпосылка не о независимости случайных величин, а о том, что производная по исследуемому признаку не зависит от других величин -- возможно просто стоит написать, что обычно в моделях комбинации признаков не используются, а если и используются, то задаются извне пользователем. И если в этом способе используются какие-то комбинации даже этого признака с самим собой, и при этом они рассматриваются отдельно, то мне кажется этот метод будет бесполезен

% можно дополнить, что возможно стоит брать не матожидание, а предоставлять подставлять некоторые значения, потому что предельные эффекты все равно будут разные для всех -- например LIME так делает